{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="container py-4">
    <div class="glass-card p-3">
        <h2 class="text-white mb-3">{{ filename }}</h2>
        <video-js id="video-player" class="vjs-fluid" controls preload="auto">
            <source src="{% url 'video-stream' filename %}" type="{{ mime_type }}">
            <p class="vjs-no-js">
                Please enable JavaScript to view this video.
            </p>
        </video-js>
    </div>
</div>
{% endblock %}

{% block extra_scripts %}
<link href="https://vjs.zencdn.net/8.10.0/video-js.css" rel="stylesheet">
<script src="https://vjs.zencdn.net/8.10.0/video.min.js"></script>
<script>
    // Initialize Video.js player
    const player = videojs('video-player', {
        fluid: true,
        responsive: true,
        playbackRates: [0.5, 1, 1.5, 2],
        controlBar: {
            children: [
                'playToggle',
                'volumePanel',
                'currentTimeDisplay',
                'timeDivider',
                'durationDisplay',
                'progressControl',
                'remainingTimeDisplay',
                'playbackRateMenuButton',
                'fullscreenToggle'
            ]
        }
    });
</script>
{% endblock %}